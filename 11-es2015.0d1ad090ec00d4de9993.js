(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{iAjz:function(e,t,n){"use strict";n.r(t),n.d(t,"EditProfileModule",(function(){return A}));var i=n("ofXK"),a=n("tyNb"),r=n("3Pt+"),l=n("HAZY"),d=n("tzug"),o=n("XNiG"),s=n("1G5W"),m=n("wHSu"),c=n("fXoL"),p=n("6NWb"),f=n("eC24"),u=n("1kSV");function h(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"button",17),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().editProfile()})),c["\u0275\u0275element"](1,"fa-icon",9),c["\u0275\u0275text"](2," Edit Profile "),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("icon",e.faPen)}}function g(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"button",18),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().editState=!1})),c["\u0275\u0275element"](1,"fa-icon",9),c["\u0275\u0275text"](2," Cancel Update "),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("icon",e.faWindowClose)}}function b(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div",19),c["\u0275\u0275element"](1,"app-content-loader"),c["\u0275\u0275elementEnd"]())}function v(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div"),c["\u0275\u0275elementStart"](1,"fieldset",21),c["\u0275\u0275elementStart"](2,"div",25),c["\u0275\u0275elementStart"](3,"div",26),c["\u0275\u0275elementStart"](4,"div",27),c["\u0275\u0275elementStart"](5,"div",28),c["\u0275\u0275text"](6,"Contact Address"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"div",29),c["\u0275\u0275elementStart"](8,"div",30),c["\u0275\u0275text"](9),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"fieldset",21),c["\u0275\u0275elementStart"](11,"div",25),c["\u0275\u0275elementStart"](12,"div",26),c["\u0275\u0275elementStart"](13,"div",27),c["\u0275\u0275elementStart"](14,"div",28),c["\u0275\u0275text"](15,"Birthday"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](16,"div",29),c["\u0275\u0275elementStart"](17,"div",30),c["\u0275\u0275text"](18),c["\u0275\u0275pipe"](19,"date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](20,"fieldset",21),c["\u0275\u0275elementStart"](21,"div",25),c["\u0275\u0275elementStart"](22,"div",26),c["\u0275\u0275elementStart"](23,"div",27),c["\u0275\u0275elementStart"](24,"div",28),c["\u0275\u0275text"](25,"Allergies"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](26,"div",29),c["\u0275\u0275elementStart"](27,"div",30),c["\u0275\u0275text"](28),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](9),c["\u0275\u0275textInterpolate1"](" ",e.profileContactAddress," "),c["\u0275\u0275advance"](9),c["\u0275\u0275textInterpolate1"](" ",c["\u0275\u0275pipeBind2"](19,3,1e3*e.profileBirthday,"fullDate")," "),c["\u0275\u0275advance"](10),c["\u0275\u0275textInterpolate1"](" ",e.profileAllergies," ")}}function S(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"button",48),c["\u0275\u0275text"](1,"Update Profile Details"),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](3);c["\u0275\u0275property"]("disabled",!e.updateProfile.valid)}}function y(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"button",49),c["\u0275\u0275text"](1,"Updating Profile...."),c["\u0275\u0275elementEnd"]())}function E(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"form",31),c["\u0275\u0275listener"]("ngSubmit",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"](2).childProfileUpdate()})),c["\u0275\u0275elementStart"](1,"div",32),c["\u0275\u0275elementStart"](2,"label",33),c["\u0275\u0275text"](3,"Student Contact Address"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](4,"input",34),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"div",32),c["\u0275\u0275elementStart"](6,"label",35),c["\u0275\u0275text"](7,"Student Birthday"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"div",36),c["\u0275\u0275elementStart"](9,"div",37),c["\u0275\u0275elementStart"](10,"div",38),c["\u0275\u0275element"](11,"input",39,40),c["\u0275\u0275elementStart"](13,"div",41),c["\u0275\u0275elementStart"](14,"button",42),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275reference"](12).toggle()})),c["\u0275\u0275element"](15,"fa-icon",43),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](16,"div",32),c["\u0275\u0275elementStart"](17,"label",44),c["\u0275\u0275text"](18,"Student Allergies"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](19,"input",45),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](20,S,2,1,"button",46),c["\u0275\u0275template"](21,y,2,0,"button",47),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"](2);c["\u0275\u0275property"]("formGroup",e.updateProfile),c["\u0275\u0275advance"](15),c["\u0275\u0275property"]("icon",e.faCalendarAlt),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngIf",!e.formSubmitted),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.formSubmitted)}}function x(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",20),c["\u0275\u0275elementStart"](1,"fieldset",21),c["\u0275\u0275elementStart"](2,"legend",22),c["\u0275\u0275text"](3,"Child Information"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](4,v,29,6,"div",23),c["\u0275\u0275template"](5,E,22,4,"ng-template",null,24,c["\u0275\u0275templateRefExtractor"]),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275reference"](6),t=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("ngIf",!t.editState)("ngIfElse",e)}}const w=function(){return["/app/parent/children/"]},C=[{path:"",component:(()=>{class e{constructor(e,t,n,i){this.apiAuthenticationService=e,this.activatedRoute=t,this.notificationService=n,this.location=i,this.subheading="Edit Profile",this.icon="pe-7s-female icon-gradient bg-mean-fruit",this.faPen=m.r,this.faWindowClose=m.C,this.faCalendarAlt=m.d,this.faArrowLeft=m.a,this.ngUnsubscribe$=new o.a,this.updateProfile=new r.FormGroup({_address:new r.FormControl(""),_birthday:new r.FormControl(""),_allergies:new r.FormControl("")}),this.getChildProfile=()=>{this.apiAuthenticationService.fetch("parent",{_searchFilter:JSON.stringify({_fetchProfile:this.studentUid})}).pipe(Object(s.a)(this.ngUnsubscribe$)).subscribe(e=>{200===e.statusCode&&null!==e.data?(this.profileFirstName=e.data._firstName,this.profileLastName=e.data._lastName,this.profileContactAddress=void 0===e.data._address?"":e.data._address,this.profileBirthday=void 0===e.data._birthday||""===e.data._birthday?new Date("1900-01-01").getTime()/1e3:e.data._birthday,this.profileAllergies=void 0===e.data._allergies?"":e.data._allergies,this.childLoading=!0):(this.notificationService.error({_title:"No child profile found",_message:"No child profile found for provided id."}),this.location.back())})}}ngOnInit(){this.studentUid=this.activatedRoute.snapshot.params.id,this.getChildProfile()}editProfile(){this.unixDate=new Date(1e3*this.profileBirthday),this.updateProfile.setValue({_address:this.profileContactAddress,_birthday:{year:this.unixDate.getFullYear(),month:this.unixDate.getMonth()+1,day:this.unixDate.getDate()},_allergies:this.profileAllergies}),this.editState=!0}childProfileUpdate(){this.updateProfile.valid&&(this.formSubmitted=!0,this.updateProfile.value._uid=this.studentUid,this.updateProfile.value._birthday=new Date(`${this.updateProfile.value._birthday.year}-${this.updateProfile.value._birthday.month}-${this.updateProfile.value._birthday.day}`).getTime()/1e3,this.apiAuthenticationService.patch("parent",this.updateProfile.value).pipe(Object(s.a)(this.ngUnsubscribe$)).subscribe(e=>{200===e.statusCode&&(this.notificationService.success({_title:"Operation Successful",_message:"Student profile updated successfully."}),this.editState=!1)}),this.formSubmitted=!1)}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](l.a),c["\u0275\u0275directiveInject"](a.a),c["\u0275\u0275directiveInject"](d.a),c["\u0275\u0275directiveInject"](i.Location))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["app-edit-profile"]],decls:21,vars:9,consts:[[1,"app-page-title"],[1,"page-title-wrapper"],[1,"page-title-heading"],[1,"page-title-icon"],[1,"avatar-icon-wrapper","mb-3","avatar-icon-xl"],[1,"avatar-icon"],["src","./assets/images/avatars/6.jpg","alt","Avatar 5"],[1,"page-title-actions"],["type","button",1,"mr-3","btn-shadow","d-inline-flex","align-items-center","btn","btn-outline-warning",3,"routerLink"],[1,"mr-2",3,"icon"],["type","button","class","btn-shadow mr-3 btn btn-dark",3,"click",4,"ngIf"],["type","button","class","btn-shadow mr-3 btn btn-outline-danger",3,"click",4,"ngIf"],[1,"row"],[1,"col-lg-12","col-xl-12"],[1,"main-card","mb-3","card"],["class","h-sm d-flex justify-content-center align-items-center",4,"ngIf","ngIfElse"],["editForm",""],["type","button",1,"btn-shadow","mr-3","btn","btn-dark",3,"click"],["type","button",1,"btn-shadow","mr-3","btn","btn-outline-danger",3,"click"],[1,"h-sm","d-flex","justify-content-center","align-items-center"],[1,"col-md-12","col-lg-12","col-xl-12"],[1,"border","p-2"],[1,"w-auto"],[4,"ngIf","ngIfElse"],["profileUpdate",""],[1,"widget-content","p-0"],[1,"widget-content-wrapper"],[1,"widget-content-left"],[1,"widget-heading"],[1,"widget-content-right"],[1,"text-muted"],["novalidate","",1,"needs-validation","justify-content-center","align-items-center",3,"formGroup","ngSubmit"],[1,"position-relative","form-group"],["for","address"],["formControlName","_address","id","address","placeholder","Student Contact Address","type","text",1,"form-control"],["for","birthday"],[1,"inline-form"],[1,"form-group"],[1,"input-group"],["placeholder","yyyy-mm-dd","id","birthday","formControlName","_birthday","ngbDatepicker","",1,"form-control"],["d","ngbDatepicker"],[1,"input-group-append"],["type","button",1,"btn-shadow","d-inline-flex","align-items-center","btn","btn-success",3,"click"],[3,"icon"],["for","allergies"],["formControlName","_allergies","id","allergies","placeholder","Student Contact Allergies","type","text",1,"form-control"],["type","submit","class","mt-1 btn btn-primary",3,"disabled",4,"ngIf"],["disabled","","class","mt-1 btn btn-primary",4,"ngIf"],["type","submit",1,"mt-1","btn","btn-primary",3,"disabled"],["disabled","",1,"mt-1","btn","btn-primary"]],template:function(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",0),c["\u0275\u0275elementStart"](1,"div",1),c["\u0275\u0275elementStart"](2,"div",2),c["\u0275\u0275elementStart"](3,"div",3),c["\u0275\u0275elementStart"](4,"div",4),c["\u0275\u0275elementStart"](5,"div",5),c["\u0275\u0275element"](6,"img",6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"div"),c["\u0275\u0275text"](8),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"div",7),c["\u0275\u0275elementStart"](10,"button",8),c["\u0275\u0275element"](11,"fa-icon",9),c["\u0275\u0275text"](12," Back "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](13,h,3,1,"button",10),c["\u0275\u0275template"](14,g,3,1,"button",11),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](15,"div",12),c["\u0275\u0275elementStart"](16,"div",13),c["\u0275\u0275elementStart"](17,"div",14),c["\u0275\u0275template"](18,b,2,0,"div",15),c["\u0275\u0275template"](19,x,7,2,"ng-template",null,16,c["\u0275\u0275templateRefExtractor"]),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275reference"](20);c["\u0275\u0275advance"](8),c["\u0275\u0275textInterpolate2"](" ",t.profileFirstName," ",t.profileLastName," "),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("routerLink",c["\u0275\u0275pureFunction0"](8,w)),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("icon",t.faArrowLeft),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",!t.editState),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.editState),c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("ngIf",!t.childLoading)("ngIfElse",e)}},directives:[a.g,p.a,i.NgIf,f.a,r["\u0275angular_packages_forms_forms_y"],r.NgControlStatusGroup,r.FormGroupDirective,r.DefaultValueAccessor,r.NgControlStatus,r.FormControlName,u.f],pipes:[i.DatePipe],styles:[""]}),e})(),data:{title:"Edit Child Profile"}}];let _=(()=>{class e{}return e.\u0275mod=c["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=c["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[a.i.forChild(C)],a.i]}),e})();var I=n("Pc/E"),P=n("TTnx");let A=(()=>{class e{}return e.\u0275mod=c["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=c["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.CommonModule,_,I.a,P.DashboardModule,r.ReactiveFormsModule,p.b,u.b]]}),e})()}}]);