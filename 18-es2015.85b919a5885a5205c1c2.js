(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{KOxN:function(e,t,n){"use strict";n.r(t),n.d(t,"SchoolDetailsModule",(function(){return E}));var o=n("ofXK"),a=n("tyNb"),r=n("XNiG"),i=n("1G5W"),s=n("3Pt+"),l=n("MJdi"),d=n("tzug"),c=n("HAZY"),m=n("wHSu"),u=n("fXoL"),p=n("NVKa"),h=n("eC24"),b=n("oZhZ");function f(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"div",6),u["\u0275\u0275element"](1,"app-content-loader"),u["\u0275\u0275elementEnd"]())}function _(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"button",27),u["\u0275\u0275text"](1,"Update"),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275property"]("disabled",!e.form.valid)}}function v(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"button",28),u["\u0275\u0275element"](1,"span",29),u["\u0275\u0275text"](2," Updating Details... "),u["\u0275\u0275elementEnd"]())}function g(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"div",7),u["\u0275\u0275elementStart"](1,"h3"),u["\u0275\u0275text"](2,"School Details"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](3,"form",8),u["\u0275\u0275listener"]("validSubmit",(function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().submitForm()})),u["\u0275\u0275elementStart"](4,"div",9),u["\u0275\u0275elementStart"](5,"div",10),u["\u0275\u0275elementStart"](6,"div",11),u["\u0275\u0275elementStart"](7,"label",12),u["\u0275\u0275text"](8,"School Name"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](9,"input",13),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](10,"div",14),u["\u0275\u0275elementStart"](11,"div",10),u["\u0275\u0275elementStart"](12,"div",11),u["\u0275\u0275elementStart"](13,"label",15),u["\u0275\u0275text"](14,"Street"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](15,"input",16),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](16,"div",17),u["\u0275\u0275elementStart"](17,"div",11),u["\u0275\u0275elementStart"](18,"label",18),u["\u0275\u0275text"](19,"State"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](20,"input",19),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](21,"div",17),u["\u0275\u0275elementStart"](22,"div",11),u["\u0275\u0275elementStart"](23,"label",20),u["\u0275\u0275text"](24,"Zip Code"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](25,"input",21),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](26,"div",17),u["\u0275\u0275elementStart"](27,"div",11),u["\u0275\u0275elementStart"](28,"label",22),u["\u0275\u0275text"](29,"Country"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](30,"input",23),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](31,"div",24),u["\u0275\u0275template"](32,_,2,1,"button",25),u["\u0275\u0275template"](33,v,3,0,"button",26),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("formGroup",e.form),u["\u0275\u0275advance"](29),u["\u0275\u0275property"]("ngIf",!e.formSubmitted),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.formSubmitted)}}const S=[{path:"",component:(()=>{class e{constructor(e,t,n,o,a){this.classService=e,this.activatedRoute=t,this.router=n,this.notificationService=o,this.apiAuthenticationService=a,this.subheading="Settings",this.icon="pe-7s-display2 icon-gradient bg-mean-fruit",this.buttonMessage="Back",this.buttonIcon=m.a,this.buttonDestination="/app/school",this.ngUnsubscribe$=new r.a,this.schoolDetails={_uid:null,_name:null,_address:{_country:null,_state:null,_zipCode:null,_street:null}},this.form=new s.FormGroup({_name:new s.FormControl("",s.Validators.required),_address:new s.FormGroup({_country:new s.FormControl(""),_state:new s.FormControl(""),_zipCode:new s.FormControl(""),_street:new s.FormControl("")})}),this.validateSchoolUid=()=>{this.classService.schoolDetails(this.schoolUid).pipe(Object(i.a)(this.ngUnsubscribe$)).subscribe(e=>{200===e.statusCode&&e.data._details._recordsFound>0?(this.schoolDetails={_uid:e.data._data[0]._source._uid,_name:e.data._data[0]._source._name,_address:{_country:e.data._data[0]._source._address._country,_state:e.data._data[0]._source._address._state,_zipCode:e.data._data[0]._source._address._zipCode,_street:e.data._data[0]._source._address._street}},this.form.setValue({_name:e.data._data[0]._source._name,_address:{_country:e.data._data[0]._source._address._country,_state:e.data._data[0]._source._address._state,_zipCode:e.data._data[0]._source._address._zipCode,_street:e.data._data[0]._source._address._street}}),this.dataFetching=!0):(this.notificationService.error({_title:"Error Occurred.",_message:"No school profile found."}),this.router.navigate(["/app/school"]))},()=>{this.notificationService.error({_title:"Error Occurred.",_message:"No school profile found."}),this.router.navigate(["/app/school"])})},this.ngOnDestroy=()=>{this.ngUnsubscribe$.next(),this.ngUnsubscribe$.complete()}}ngOnInit(){this.schoolUid=this.activatedRoute.snapshot.params.id,this.validateSchoolUid()}submitForm(){this.form.valid&&(this.formSubmitted=!0,this.form.value._uid=this.schoolDetails._uid,this.apiAuthenticationService.patch("school",this.form.value).pipe(Object(i.a)(this.ngUnsubscribe$)).subscribe(e=>{200===e.statusCode&&(this.notificationService.success({_title:"Operation Successful",_message:"Details updated successfully."}),this.schoolDetails._name=this.form.value._name,this.formSubmitted=!1)}))}}return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"](l.a),u["\u0275\u0275directiveInject"](a.a),u["\u0275\u0275directiveInject"](a.f),u["\u0275\u0275directiveInject"](d.a),u["\u0275\u0275directiveInject"](c.a))},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["app-school-details"]],decls:7,vars:8,consts:[[3,"heading","subheading","icon","buttonIcon","buttonDestination","buttonMessage"],[1,"row"],[1,"col-lg-12","col-xl-12"],[1,"main-card","mb-3","card"],["class","h-sm d-flex justify-content-center align-items-center",4,"ngIf","ngIfElse"],["formDetails",""],[1,"h-sm","d-flex","justify-content-center","align-items-center"],[1,"p-5"],["novalidate","",1,"needs-validation",3,"formGroup","validSubmit"],[1,"form-row"],[1,"col-md-12"],[1,"position-relative","form-group"],["for","name"],["formControlName","_name","type","text","id","name","placeholder","School Name","required","",1,"form-control"],["formGroupName","_address",1,"form-row"],["for","street"],["formControlName","_street","type","text","id","street","placeholder","Street Address",1,"form-control"],[1,"col-md-4"],["for","state"],["id","state","formControlName","_state","type","text",1,"form-control"],["for","zipCode"],["formControlName","_zipCode","id","zipCode","type","text",1,"form-control"],["for","country"],["formControlName","_country","id","country","type","text",1,"form-control"],[1,"btn-actions-pane-right"],["type","submit","class","btn-wide btn-pill btn-shadow btn-hover-shine btn btn-primary btn-lg",3,"disabled",4,"ngIf"],["class","btn-wide btn-pill btn-shadow btn-hover-shine btn btn-primary btn-lg","type","button","disabled","",4,"ngIf"],["type","submit",1,"btn-wide","btn-pill","btn-shadow","btn-hover-shine","btn","btn-primary","btn-lg",3,"disabled"],["type","button","disabled","",1,"btn-wide","btn-pill","btn-shadow","btn-hover-shine","btn","btn-primary","btn-lg"],["role","status","aria-hidden","true",1,"spinner-grow","spinner-grow-sm"]],template:function(e,t){if(1&e&&(u["\u0275\u0275element"](0,"app-page-title",0),u["\u0275\u0275elementStart"](1,"div",1),u["\u0275\u0275elementStart"](2,"div",2),u["\u0275\u0275elementStart"](3,"div",3),u["\u0275\u0275template"](4,f,2,0,"div",4),u["\u0275\u0275template"](5,g,34,3,"ng-template",null,5,u["\u0275\u0275templateRefExtractor"]),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275reference"](6);u["\u0275\u0275property"]("heading",t.schoolDetails._name)("subheading",t.subheading)("icon",t.icon)("buttonIcon",t.buttonIcon)("buttonDestination",t.buttonDestination)("buttonMessage",t.buttonMessage),u["\u0275\u0275advance"](4),u["\u0275\u0275property"]("ngIf",!t.dataFetching)("ngIfElse",e)}},directives:[p.a,o.NgIf,h.a,s["\u0275angular_packages_forms_forms_y"],s.NgControlStatusGroup,b.b,s.FormGroupDirective,b.a,s.DefaultValueAccessor,b.d,s.NgControlStatus,s.FormControlName,s.RequiredValidator,s.FormGroupName],styles:[""]}),e})(),data:{title:"School Management"}}];let y=(()=>{class e{}return e.\u0275mod=u["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=u["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[a.i.forChild(S)],a.i]}),e})();var C=n("Pc/E"),w=n("TTnx");let E=(()=>{class e{}return e.\u0275mod=u["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=u["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[o.CommonModule,y,C.a,w.DashboardModule,b.c,s.ReactiveFormsModule]]}),e})()}}]);