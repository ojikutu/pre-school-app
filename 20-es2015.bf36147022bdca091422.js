(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{Cllu:function(e,t,n){"use strict";n.r(t),n.d(t,"AllTeachersModule",(function(){return C}));var i=n("ofXK"),a=n("tyNb"),r=n("XNiG"),l=n("1G5W"),o=n("HAZY"),s=n("tzug"),d=n("wHSu"),c=n("fXoL"),m=n("1kSV"),p=n("6NWb"),h=n("3Pt+"),u=n("oZhZ");function b(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"button",13),c["\u0275\u0275text"](1,"Submit"),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("disabled",!e.createTeacherForm.valid)}}function f(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"button",14),c["\u0275\u0275element"](1,"span",15),c["\u0275\u0275text"](2," Sending Invitation... "),c["\u0275\u0275elementEnd"]())}let v=(()=>{class e{constructor(e,t,n){this.apiAuthenticationService=e,this.notificationService=t,this.modalService=n,this.ngUnsubscribe$=new r.a,this.createTeacherForm=new h.FormGroup({_firstName:new h.FormControl(""),_lastName:new h.FormControl(""),_email:new h.FormControl("",h.Validators.required)}),this.ngOnDestroy=()=>{this.ngUnsubscribe$.next(),this.ngUnsubscribe$.complete()}}ngOnInit(){}submitForm(){this.createTeacherForm.valid&&(this.formState=!0,this.createTeacherForm.value._school_uid=this.schoolUid,this.apiAuthenticationService.create("teacher",this.createTeacherForm.value).pipe(Object(l.a)(this.ngUnsubscribe$)).subscribe(e=>{201===e.statusCode&&(this.notificationService.success({_title:"Invitation Sent",_message:`An invitation has been sent to ${this.createTeacherForm.value._email}, you can view all pending invitations on the invites page.`}),this.modalService.dismissAll())},()=>{this.formState=!1}))}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](o.a),c["\u0275\u0275directiveInject"](s.a),c["\u0275\u0275directiveInject"](m.g))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["app-create-teacher"]],inputs:{schoolUid:"schoolUid"},decls:21,vars:3,consts:[["novalidate","",1,"needs-validation",3,"formGroup","validSubmit"],[1,"form-row"],[1,"col-md-12","mb-12","form-group"],["for","email"],[1,"text-danger"],["formControlName","_email","type","email","id","email","placeholder","Teacher's Email","required","",1,"form-control"],["for","firstName"],["formControlName","_firstName","type","text","id","firstName","placeholder","Teacher's First Name",1,"form-control"],["for","lastName"],["formControlName","_lastName","type","text","id","lastName","placeholder","Teacher's Last Name",1,"form-control"],[1,"btn-actions-pane-right"],["type","submit","class","btn-wide btn-pill btn-shadow btn-hover-shine btn btn-primary btn-lg",3,"disabled",4,"ngIf"],["class","btn-wide btn-pill btn-shadow btn-hover-shine btn btn-primary btn-lg","type","button","disabled","",4,"ngIf"],["type","submit",1,"btn-wide","btn-pill","btn-shadow","btn-hover-shine","btn","btn-primary","btn-lg",3,"disabled"],["type","button","disabled","",1,"btn-wide","btn-pill","btn-shadow","btn-hover-shine","btn","btn-primary","btn-lg"],["role","status","aria-hidden","true",1,"spinner-grow","spinner-grow-sm"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"form",0),c["\u0275\u0275listener"]("validSubmit",(function(){return t.submitForm()})),c["\u0275\u0275elementStart"](1,"div",1),c["\u0275\u0275elementStart"](2,"div",2),c["\u0275\u0275elementStart"](3,"label",3),c["\u0275\u0275text"](4,"Teacher's Email Address"),c["\u0275\u0275elementStart"](5,"span",4),c["\u0275\u0275text"](6,"*"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](7,"input",5),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"div",2),c["\u0275\u0275elementStart"](9,"label",6),c["\u0275\u0275text"](10,"Teacher's First Name"),c["\u0275\u0275elementStart"](11,"span",4),c["\u0275\u0275text"](12,"*"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](13,"input",7),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"div",2),c["\u0275\u0275elementStart"](15,"label",8),c["\u0275\u0275text"](16,"Teacher's Last Name"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](17,"input",9),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](18,"div",10),c["\u0275\u0275template"](19,b,2,1,"button",11),c["\u0275\u0275template"](20,f,3,0,"button",12),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275property"]("formGroup",t.createTeacherForm),c["\u0275\u0275advance"](19),c["\u0275\u0275property"]("ngIf",!t.formState),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.formState))},directives:[h["\u0275angular_packages_forms_forms_y"],h.NgControlStatusGroup,h.FormGroupDirective,u.b,u.a,h.DefaultValueAccessor,u.d,h.NgControlStatus,h.FormControlName,h.RequiredValidator,i.NgIf],styles:[""]}),e})();var g=n("eC24"),S=n("njyG");function E(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",15),c["\u0275\u0275elementStart"](1,"h4",16),c["\u0275\u0275text"](2,"Create Class"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"button",17),c["\u0275\u0275listener"]("click",(function(){return(0,t.dismiss)("Cross click")})),c["\u0275\u0275elementStart"](4,"span",18),c["\u0275\u0275text"](5,"\xd7"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"div",19),c["\u0275\u0275element"](7,"app-create-teacher",20),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](7),c["\u0275\u0275property"]("schoolUid",e.schoolUid._uid)}}function y(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div",21),c["\u0275\u0275element"](1,"app-content-loader"),c["\u0275\u0275elementEnd"]())}function x(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"tr"),c["\u0275\u0275elementStart"](1,"td"),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"td"),c["\u0275\u0275elementStart"](4,"div",25),c["\u0275\u0275elementStart"](5,"div",26),c["\u0275\u0275elementStart"](6,"div",27),c["\u0275\u0275elementStart"](7,"div",28),c["\u0275\u0275elementStart"](8,"a",29),c["\u0275\u0275text"](9),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"div",30),c["\u0275\u0275elementStart"](11,"div",31),c["\u0275\u0275text"](12),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=t.index,i=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](n+1),c["\u0275\u0275advance"](6),c["\u0275\u0275propertyInterpolate2"]("routerLink","/app/school/teachers/",i.schoolUid._uid,"/profile/",e.key,""),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate2"]("",e.value._firstName," ",e.value._lastName,""),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate1"](" ",e.value._email," ")}}function w(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",22),c["\u0275\u0275elementStart"](1,"table",23),c["\u0275\u0275elementStart"](2,"thead"),c["\u0275\u0275elementStart"](3,"tr"),c["\u0275\u0275elementStart"](4,"th"),c["\u0275\u0275text"](5,"#"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"th"),c["\u0275\u0275text"](7,"Teacher Name"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"tbody"),c["\u0275\u0275template"](9,x,13,6,"tr",24),c["\u0275\u0275pipe"](10,"keyvalue"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](9),c["\u0275\u0275property"]("ngForOf",c["\u0275\u0275pipeBind1"](10,1,e.recordsRetrieved))}}const _=[{path:"",component:(()=>{class e{constructor(e,t,n,i,a){this.notificationService=e,this.apiAuthenticationService=t,this.activatedRoute=n,this.router=i,this.modalService=a,this.ngUnsubscribe$=new r.a,this.faPlus=d.s,this.faArrowLeft=d.a,this.schoolUid={_uid:null,_name:null},this.heading="Teachers",this.subheading="Teacher Management.",this.icon="pe-7s-users icon-gradient bg-mean-fruit",this.ngOnDestroy=()=>{this.ngUnsubscribe$.next(),this.ngUnsubscribe$.complete()}}ngOnInit(){this.schoolUid._uid=this.activatedRoute.snapshot.params.id,this.schoolUid._uid&&this.apiAuthenticationService.fetch("school",{_searchFilter:JSON.stringify({_mustEqual:{_uid:this.schoolUid._uid}})}).pipe(Object(l.a)(this.ngUnsubscribe$)).subscribe(e=>{e.data._details._recordsFound>0?(this.schoolUid._name=e.data._data[0]._source._name,this.apiAuthenticationService.fetch("teacher",{_searchFilter:JSON.stringify({_school_uid:this.schoolUid._uid,_records:1e3})}).pipe(Object(l.a)(this.ngUnsubscribe$)).subscribe(e=>{this.recordsRetrieved=void 0===typeof e.data?[]:e.data,this.dataFetching=!0})):(this.notificationService.error({_title:"School Profile",_message:"School profile not found."}),this.router.navigate(["/app/school"]))})}openModal(e){this.modalService.open(e,{size:"lg"})}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](s.a),c["\u0275\u0275directiveInject"](o.a),c["\u0275\u0275directiveInject"](a.a),c["\u0275\u0275directiveInject"](a.f),c["\u0275\u0275directiveInject"](m.g))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["app-all-teachers"]],decls:24,vars:9,consts:[[1,"app-page-title"],[1,"page-title-wrapper"],[1,"page-title-heading"],[1,"page-title-icon"],[1,"page-title-subheading"],[1,"page-title-actions"],["type","button","routerLink","/app/school",1,"btn-shadow","d-inline-flex","align-items-center","btn","btn-outline-warning","mr-2"],[1,"mr-2",3,"icon"],["type","button",1,"btn-shadow","d-inline-flex","align-items-center","btn","btn-success",3,"click"],["teacherCreateModal",""],[1,"row"],[1,"col-lg-12","col-xl-12"],[1,"main-card","mb-3","card"],["class","h-sm d-flex justify-content-center align-items-center",4,"ngIf","ngIfElse"],["teacherDisplay",""],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"schoolUid"],[1,"h-sm","d-flex","justify-content-center","align-items-center"],[1,"p-5","table-responsive"],["datatable","",1,"padding-top-5","align-middle","mb-0","table","table-borderless","table-striped","table-hover"],[4,"ngFor","ngForOf"],[1,"widget-content","p-0"],[1,"widget-content-wrapper"],[1,"widget-content-left"],[1,"widget-heading"],[3,"routerLink"],[1,"widget-subheading","opacity-10"],[1,"pr-2","text-success"]],template:function(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",0),c["\u0275\u0275elementStart"](1,"div",1),c["\u0275\u0275elementStart"](2,"div",2),c["\u0275\u0275elementStart"](3,"div",3),c["\u0275\u0275element"](4,"i"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"div"),c["\u0275\u0275text"](6),c["\u0275\u0275elementStart"](7,"div",4),c["\u0275\u0275text"](8),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"div",5),c["\u0275\u0275elementStart"](10,"button",6),c["\u0275\u0275element"](11,"fa-icon",7),c["\u0275\u0275text"](12," Back "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"button",8),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=c["\u0275\u0275reference"](17);return t.openModal(n)})),c["\u0275\u0275element"](14,"fa-icon",7),c["\u0275\u0275text"](15," Add New Teacher "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](16,E,8,1,"ng-template",null,9,c["\u0275\u0275templateRefExtractor"]),c["\u0275\u0275elementStart"](18,"div",10),c["\u0275\u0275elementStart"](19,"div",11),c["\u0275\u0275elementStart"](20,"div",12),c["\u0275\u0275template"](21,y,2,0,"div",13),c["\u0275\u0275template"](22,w,11,3,"ng-template",null,14,c["\u0275\u0275templateRefExtractor"]),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275reference"](23);c["\u0275\u0275advance"](4),c["\u0275\u0275classMapInterpolate1"]("icon ",t.icon,""),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate1"](" ",t.heading," "),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate1"](" ",t.subheading," "),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("icon",t.faArrowLeft),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("icon",t.faPlus),c["\u0275\u0275advance"](7),c["\u0275\u0275property"]("ngIf",!t.dataFetching)("ngIfElse",e)}},directives:[a.g,p.a,i.NgIf,v,g.a,S.a,i.NgForOf,a.h],pipes:[i.KeyValuePipe],styles:[""]}),e})(),data:{title:"Teacher Management"}}];let N=(()=>{class e{}return e.\u0275mod=c["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=c["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[a.i.forChild(_)],a.i]}),e})();var I=n("TTnx");let C=(()=>{class e{}return e.\u0275mod=c["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=c["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.CommonModule,N,p.b,I.DashboardModule,S.b]]}),e})()}}]);