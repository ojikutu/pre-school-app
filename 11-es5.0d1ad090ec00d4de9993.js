function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{iAjz:function(e,t,n){"use strict";n.r(t),n.d(t,"EditProfileModule",(function(){return j}));var i=n("ofXK"),a=n("tyNb"),r=n("3Pt+"),l=n("HAZY"),d=n("tzug"),o=n("XNiG"),s=n("1G5W"),c=n("wHSu"),m=n("fXoL"),f=n("6NWb"),p=n("eC24"),u=n("1kSV");function v(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"button",17),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().editProfile()})),m["\u0275\u0275element"](1,"fa-icon",9),m["\u0275\u0275text"](2," Edit Profile "),m["\u0275\u0275elementEnd"]()}if(2&e){var i=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("icon",i.faPen)}}function h(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"button",18),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().editState=!1})),m["\u0275\u0275element"](1,"fa-icon",9),m["\u0275\u0275text"](2," Cancel Update "),m["\u0275\u0275elementEnd"]()}if(2&e){var i=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("icon",i.faWindowClose)}}function b(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",19),m["\u0275\u0275element"](1,"app-content-loader"),m["\u0275\u0275elementEnd"]())}function g(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275elementStart"](1,"fieldset",21),m["\u0275\u0275elementStart"](2,"div",25),m["\u0275\u0275elementStart"](3,"div",26),m["\u0275\u0275elementStart"](4,"div",27),m["\u0275\u0275elementStart"](5,"div",28),m["\u0275\u0275text"](6,"Contact Address"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](7,"div",29),m["\u0275\u0275elementStart"](8,"div",30),m["\u0275\u0275text"](9),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](10,"fieldset",21),m["\u0275\u0275elementStart"](11,"div",25),m["\u0275\u0275elementStart"](12,"div",26),m["\u0275\u0275elementStart"](13,"div",27),m["\u0275\u0275elementStart"](14,"div",28),m["\u0275\u0275text"](15,"Birthday"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](16,"div",29),m["\u0275\u0275elementStart"](17,"div",30),m["\u0275\u0275text"](18),m["\u0275\u0275pipe"](19,"date"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](20,"fieldset",21),m["\u0275\u0275elementStart"](21,"div",25),m["\u0275\u0275elementStart"](22,"div",26),m["\u0275\u0275elementStart"](23,"div",27),m["\u0275\u0275elementStart"](24,"div",28),m["\u0275\u0275text"](25,"Allergies"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](26,"div",29),m["\u0275\u0275elementStart"](27,"div",30),m["\u0275\u0275text"](28),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"](2);m["\u0275\u0275advance"](9),m["\u0275\u0275textInterpolate1"](" ",n.profileContactAddress," "),m["\u0275\u0275advance"](9),m["\u0275\u0275textInterpolate1"](" ",m["\u0275\u0275pipeBind2"](19,3,1e3*n.profileBirthday,"fullDate")," "),m["\u0275\u0275advance"](10),m["\u0275\u0275textInterpolate1"](" ",n.profileAllergies," ")}}function S(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"button",48),m["\u0275\u0275text"](1,"Update Profile Details"),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"](3);m["\u0275\u0275property"]("disabled",!n.updateProfile.valid)}}function y(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"button",49),m["\u0275\u0275text"](1,"Updating Profile...."),m["\u0275\u0275elementEnd"]())}function E(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"form",31),m["\u0275\u0275listener"]("ngSubmit",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"](2).childProfileUpdate()})),m["\u0275\u0275elementStart"](1,"div",32),m["\u0275\u0275elementStart"](2,"label",33),m["\u0275\u0275text"](3,"Student Contact Address"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](4,"input",34),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](5,"div",32),m["\u0275\u0275elementStart"](6,"label",35),m["\u0275\u0275text"](7,"Student Birthday"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](8,"div",36),m["\u0275\u0275elementStart"](9,"div",37),m["\u0275\u0275elementStart"](10,"div",38),m["\u0275\u0275element"](11,"input",39,40),m["\u0275\u0275elementStart"](13,"div",41),m["\u0275\u0275elementStart"](14,"button",42),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275reference"](12).toggle()})),m["\u0275\u0275element"](15,"fa-icon",43),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](16,"div",32),m["\u0275\u0275elementStart"](17,"label",44),m["\u0275\u0275text"](18,"Student Allergies"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](19,"input",45),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](20,S,2,1,"button",46),m["\u0275\u0275template"](21,y,2,0,"button",47),m["\u0275\u0275elementEnd"]()}if(2&e){var i=m["\u0275\u0275nextContext"](2);m["\u0275\u0275property"]("formGroup",i.updateProfile),m["\u0275\u0275advance"](15),m["\u0275\u0275property"]("icon",i.faCalendarAlt),m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("ngIf",!i.formSubmitted),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",i.formSubmitted)}}function x(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div",20),m["\u0275\u0275elementStart"](1,"fieldset",21),m["\u0275\u0275elementStart"](2,"legend",22),m["\u0275\u0275text"](3,"Child Information"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](4,g,29,6,"div",23),m["\u0275\u0275template"](5,E,22,4,"ng-template",null,24,m["\u0275\u0275templateRefExtractor"]),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275reference"](6),i=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](4),m["\u0275\u0275property"]("ngIf",!i.editState)("ngIfElse",n)}}var C,w,_,P=function(){return["/app/parent/children/"]},I=[{path:"",component:(C=function(){function e(t,n,i,a){var l=this;_classCallCheck(this,e),this.apiAuthenticationService=t,this.activatedRoute=n,this.notificationService=i,this.location=a,this.subheading="Edit Profile",this.icon="pe-7s-female icon-gradient bg-mean-fruit",this.faPen=c.r,this.faWindowClose=c.C,this.faCalendarAlt=c.d,this.faArrowLeft=c.a,this.ngUnsubscribe$=new o.a,this.updateProfile=new r.FormGroup({_address:new r.FormControl(""),_birthday:new r.FormControl(""),_allergies:new r.FormControl("")}),this.getChildProfile=function(){l.apiAuthenticationService.fetch("parent",{_searchFilter:JSON.stringify({_fetchProfile:l.studentUid})}).pipe(Object(s.a)(l.ngUnsubscribe$)).subscribe((function(e){200===e.statusCode&&null!==e.data?(l.profileFirstName=e.data._firstName,l.profileLastName=e.data._lastName,l.profileContactAddress=void 0===e.data._address?"":e.data._address,l.profileBirthday=void 0===e.data._birthday||""===e.data._birthday?new Date("1900-01-01").getTime()/1e3:e.data._birthday,l.profileAllergies=void 0===e.data._allergies?"":e.data._allergies,l.childLoading=!0):(l.notificationService.error({_title:"No child profile found",_message:"No child profile found for provided id."}),l.location.back())}))}}return _createClass(e,[{key:"ngOnInit",value:function(){this.studentUid=this.activatedRoute.snapshot.params.id,this.getChildProfile()}},{key:"editProfile",value:function(){this.unixDate=new Date(1e3*this.profileBirthday),this.updateProfile.setValue({_address:this.profileContactAddress,_birthday:{year:this.unixDate.getFullYear(),month:this.unixDate.getMonth()+1,day:this.unixDate.getDate()},_allergies:this.profileAllergies}),this.editState=!0}},{key:"childProfileUpdate",value:function(){var e=this;this.updateProfile.valid&&(this.formSubmitted=!0,this.updateProfile.value._uid=this.studentUid,this.updateProfile.value._birthday=new Date("".concat(this.updateProfile.value._birthday.year,"-").concat(this.updateProfile.value._birthday.month,"-").concat(this.updateProfile.value._birthday.day)).getTime()/1e3,this.apiAuthenticationService.patch("parent",this.updateProfile.value).pipe(Object(s.a)(this.ngUnsubscribe$)).subscribe((function(t){200===t.statusCode&&(e.notificationService.success({_title:"Operation Successful",_message:"Student profile updated successfully."}),e.editState=!1)})),this.formSubmitted=!1)}}]),e}(),C.\u0275fac=function(e){return new(e||C)(m["\u0275\u0275directiveInject"](l.a),m["\u0275\u0275directiveInject"](a.a),m["\u0275\u0275directiveInject"](d.a),m["\u0275\u0275directiveInject"](i.Location))},C.\u0275cmp=m["\u0275\u0275defineComponent"]({type:C,selectors:[["app-edit-profile"]],decls:21,vars:9,consts:[[1,"app-page-title"],[1,"page-title-wrapper"],[1,"page-title-heading"],[1,"page-title-icon"],[1,"avatar-icon-wrapper","mb-3","avatar-icon-xl"],[1,"avatar-icon"],["src","./assets/images/avatars/6.jpg","alt","Avatar 5"],[1,"page-title-actions"],["type","button",1,"mr-3","btn-shadow","d-inline-flex","align-items-center","btn","btn-outline-warning",3,"routerLink"],[1,"mr-2",3,"icon"],["type","button","class","btn-shadow mr-3 btn btn-dark",3,"click",4,"ngIf"],["type","button","class","btn-shadow mr-3 btn btn-outline-danger",3,"click",4,"ngIf"],[1,"row"],[1,"col-lg-12","col-xl-12"],[1,"main-card","mb-3","card"],["class","h-sm d-flex justify-content-center align-items-center",4,"ngIf","ngIfElse"],["editForm",""],["type","button",1,"btn-shadow","mr-3","btn","btn-dark",3,"click"],["type","button",1,"btn-shadow","mr-3","btn","btn-outline-danger",3,"click"],[1,"h-sm","d-flex","justify-content-center","align-items-center"],[1,"col-md-12","col-lg-12","col-xl-12"],[1,"border","p-2"],[1,"w-auto"],[4,"ngIf","ngIfElse"],["profileUpdate",""],[1,"widget-content","p-0"],[1,"widget-content-wrapper"],[1,"widget-content-left"],[1,"widget-heading"],[1,"widget-content-right"],[1,"text-muted"],["novalidate","",1,"needs-validation","justify-content-center","align-items-center",3,"formGroup","ngSubmit"],[1,"position-relative","form-group"],["for","address"],["formControlName","_address","id","address","placeholder","Student Contact Address","type","text",1,"form-control"],["for","birthday"],[1,"inline-form"],[1,"form-group"],[1,"input-group"],["placeholder","yyyy-mm-dd","id","birthday","formControlName","_birthday","ngbDatepicker","",1,"form-control"],["d","ngbDatepicker"],[1,"input-group-append"],["type","button",1,"btn-shadow","d-inline-flex","align-items-center","btn","btn-success",3,"click"],[3,"icon"],["for","allergies"],["formControlName","_allergies","id","allergies","placeholder","Student Contact Allergies","type","text",1,"form-control"],["type","submit","class","mt-1 btn btn-primary",3,"disabled",4,"ngIf"],["disabled","","class","mt-1 btn btn-primary",4,"ngIf"],["type","submit",1,"mt-1","btn","btn-primary",3,"disabled"],["disabled","",1,"mt-1","btn","btn-primary"]],template:function(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div",0),m["\u0275\u0275elementStart"](1,"div",1),m["\u0275\u0275elementStart"](2,"div",2),m["\u0275\u0275elementStart"](3,"div",3),m["\u0275\u0275elementStart"](4,"div",4),m["\u0275\u0275elementStart"](5,"div",5),m["\u0275\u0275element"](6,"img",6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](7,"div"),m["\u0275\u0275text"](8),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](9,"div",7),m["\u0275\u0275elementStart"](10,"button",8),m["\u0275\u0275element"](11,"fa-icon",9),m["\u0275\u0275text"](12," Back "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](13,v,3,1,"button",10),m["\u0275\u0275template"](14,h,3,1,"button",11),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](15,"div",12),m["\u0275\u0275elementStart"](16,"div",13),m["\u0275\u0275elementStart"](17,"div",14),m["\u0275\u0275template"](18,b,2,0,"div",15),m["\u0275\u0275template"](19,x,7,2,"ng-template",null,16,m["\u0275\u0275templateRefExtractor"]),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275reference"](20);m["\u0275\u0275advance"](8),m["\u0275\u0275textInterpolate2"](" ",t.profileFirstName," ",t.profileLastName," "),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("routerLink",m["\u0275\u0275pureFunction0"](8,P)),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("icon",t.faArrowLeft),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngIf",!t.editState),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",t.editState),m["\u0275\u0275advance"](4),m["\u0275\u0275property"]("ngIf",!t.childLoading)("ngIfElse",n)}},directives:[a.g,f.a,i.NgIf,p.a,r["\u0275angular_packages_forms_forms_y"],r.NgControlStatusGroup,r.FormGroupDirective,r.DefaultValueAccessor,r.NgControlStatus,r.FormControlName,u.f],pipes:[i.DatePipe],styles:[""]}),C),data:{title:"Edit Child Profile"}}],k=((w=function e(){_classCallCheck(this,e)}).\u0275mod=m["\u0275\u0275defineNgModule"]({type:w}),w.\u0275inj=m["\u0275\u0275defineInjector"]({factory:function(e){return new(e||w)},imports:[[a.i.forChild(I)],a.i]}),w),A=n("Pc/E"),N=n("TTnx"),j=((_=function e(){_classCallCheck(this,e)}).\u0275mod=m["\u0275\u0275defineNgModule"]({type:_}),_.\u0275inj=m["\u0275\u0275defineInjector"]({factory:function(e){return new(e||_)},imports:[[i.CommonModule,k,A.a,N.DashboardModule,r.ReactiveFormsModule,f.b,u.b]]}),_)}}]);